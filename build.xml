<!--
build.xml

Ant build file for SLIM Plotter project.
Download Apache Ant from http://ant.apache.org/.
Type "ant -p" for a list of targets.
-->

<project name="slim" default="jar" basedir=".">
  <description>
    Build file for SLIM Plotter project
  </description>
  <property file="base.properties"/>
  <import file="${root.dir}/java.xml"/>
  <property file="build.properties"/>

  <target name="dist" if="isUnix" depends="jar"
    description="create distribution bundle for Slim Plotter">
    <copy todir="${dist.dir}/SlimPlotter" preservelastmodified="true">
      <fileset dir="dist"/>
      <fileset dir="${artifact.dir}" includes=
        "${component.jar} ${component.manifest-cp}"/>
    </copy>
    <!-- HACK - copy does not preserve permissions; chmod them back -->
    <chmod perm="+x">
      <fileset dir="${dist.dir}/SlimPlotter" includes="${slim.exec}"/>
    </chmod>
    <!--<zip destfile="slim.zip" basedir="${dist.dir}"/>-->
    <!-- HACK - zip does not preserve permissions; use exec instead -->
    <exec executable="zip" dir="${dist.dir}">
      <arg value="-r9"/>
      <arg value="slim.zip"/>
      <arg value="SlimPlotter"/>
    </exec>
  </target>
</project>
